// https://github.com/lofcz/esprima-analyzer
var dmp=function(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=.5;this.Match_Distance=1E3;this.Patch_DeleteThreshold=.5;this.Patch_Margin=4;this.Match_MaxBits=32},DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0;dmp.Diff=function(a, b){this[0]=a;this[1]=b};dmp.Diff.prototype.length=2;dmp.Diff.prototype.toString=function(){return this[0]+","+this[1]};
dmp.prototype.diff_main=function(a, b, c, d){"undefined"==typeof d&&(d=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1E3*this.Diff_Timeout);if(null==a||null==b)throw Error("Null input. (diff_main)");if(a==b)return a?[new dmp.Diff(DIFF_EQUAL,a)]:[];"undefined"==typeof c&&(c=!0);var e=c,f=this.diff_commonPrefix(a,b);c=a.substring(0,f);a=a.substring(f);b=b.substring(f);f=this.diff_commonSuffix(a,b);var g=a.substring(a.length-f);a=a.substring(0,a.length-f);b=b.substring(0,
    b.length-f);a=this.diff_compute_(a,b,e,d);c&&a.unshift(new dmp.Diff(DIFF_EQUAL,c));g&&a.push(new dmp.Diff(DIFF_EQUAL,g));this.diff_cleanupMerge(a);return a};
dmp.prototype.diff_compute_=function(a, b, c, d){if(!a)return[new dmp.Diff(DIFF_INSERT,b)];if(!b)return[new dmp.Diff(DIFF_DELETE,a)];var e=a.length>b.length?a:b,f=a.length>b.length?b:a,g=e.indexOf(f);return-1!=g?(c=[new dmp.Diff(DIFF_INSERT,e.substring(0,g)),new dmp.Diff(DIFF_EQUAL,f),new dmp.Diff(DIFF_INSERT,e.substring(g+f.length))],a.length>b.length&&(c[0][0]=c[2][0]=DIFF_DELETE),c):1==f.length?[new dmp.Diff(DIFF_DELETE,
    a),new dmp.Diff(DIFF_INSERT,b)]:(e=this.diff_halfMatch_(a,b))?(b=e[1],f=e[3],a=e[4],e=this.diff_main(e[0],e[2],c,d),c=this.diff_main(b,f,c,d),e.concat([new dmp.Diff(DIFF_EQUAL,a)],c)):c&&100<a.length&&100<b.length?this.diff_lineMode_(a,b,d):this.diff_bisect_(a,b,d)};
dmp.prototype.diff_bisect_=function(a, b, c){for(var d=a.length,e=b.length,f=Math.ceil((d+e)/2),g=2*f,l=Array(g),h=Array(g),k=0; k<g; k++)l[k]=-1,h[k]=-1;l[f+1]=0;h[f+1]=0;k=d-e;for(var n=0!=k%2,x=0,y=0,q=0,w=0,t=0; t<f&&!((new Date).getTime()>c); t++){for(var r=-t+x; r<=t-y; r+=2){var m=f+r;var p=r==-t||r!=t&&l[m-1]<l[m+1]?l[m+1]:l[m-1]+1;for(var v=p-r; p<d&&v<e&&a.charAt(p)==b.charAt(v);)p++,v++;l[m]=p;if(p>d)y+=2;else if(v>e)x+=2;else if(n&&(m=f+k-r,0<=m&&m<g&&-1!=h[m])){var u=d-h[m];if(p>=
    u)return this.diff_bisectSplit_(a,b,p,v,c)}}for(r=-t+q;r<=t-w;r+=2){m=f+r;u=r==-t||r!=t&&h[m-1]<h[m+1]?h[m+1]:h[m-1]+1;for(p=u-r;u<d&&p<e&&a.charAt(d-u-1)==b.charAt(e-p-1);)u++,p++;h[m]=u;if(u>d)w+=2;else if(p>e)q+=2;else if(!n&&(m=f+k-r,0<=m&&m<g&&-1!=l[m]&&(p=l[m],v=f+p-m,u=d-u,p>=u)))return this.diff_bisectSplit_(a,b,p,v,c)}}return[new dmp.Diff(DIFF_DELETE,a),new dmp.Diff(DIFF_INSERT,b)]};
dmp.prototype.diff_bisectSplit_=function(a, b, c, d, e){var f=a.substring(0,c),g=b.substring(0,d);a=a.substring(c);b=b.substring(d);f=this.diff_main(f,g,!1,e);e=this.diff_main(a,b,!1,e);return f.concat(e)};dmp.prototype.diff_commonPrefix=function(a, b){if(!a||!b||a.charAt(0)!=b.charAt(0))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0; c<e;)a.substring(f,e)==b.substring(f,e)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e};
dmp.prototype.diff_commonSuffix=function(a, b){if(!a||!b||a.charAt(a.length-1)!=b.charAt(b.length-1))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0; c<e;)a.substring(a.length-e,a.length-f)==b.substring(b.length-e,b.length-f)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e};
dmp.prototype.diff_commonOverlap_=function(a, b){var c=a.length,d=b.length;if(0==c||0==d)return 0;c>d?a=a.substring(c-d):c<d&&(b=b.substring(0,c));c=Math.min(c,d);if(a==b)return c;d=0;for(var e=1;;){var f=a.substring(c-e);f=b.indexOf(f);if(-1==f)return d;e+=f;if(0==f||a.substring(c-e)==b.substring(0,e))d=e,e++}};
dmp.prototype.diff_halfMatch_=function(a, b){function c(k, n, x){for(var y=k.substring(x,x+Math.floor(k.length/4)),q=-1,w="",t,r,m,p; -1!=(q=n.indexOf(y,q+1));){var v=f.diff_commonPrefix(k.substring(x),n.substring(q)),u=f.diff_commonSuffix(k.substring(0,x),n.substring(0,q));w.length<u+v&&(w=n.substring(q-u,q)+n.substring(q,q+v),t=k.substring(0,x-u),r=k.substring(x+v),m=n.substring(0,q-u),p=n.substring(q+v))}return 2*w.length>=k.length?[t,r,m,p,w]:null}if(0>=this.Diff_Timeout)return null;
    var d=a.length>b.length?a:b,e=a.length>b.length?b:a;if(4>d.length||2*e.length<d.length)return null;var f=this,g=c(d,e,Math.ceil(d.length/4));d=c(d,e,Math.ceil(d.length/2));if(g||d)g=d?g?g[4].length>d[4].length?g:d:d:g;else return null;if(a.length>b.length){d=g[0];e=g[1];var l=g[2];var h=g[3]}else l=g[0],h=g[1],d=g[2],e=g[3];return[d,e,l,h,g[4]]};
dmp.prototype.diff_cleanupSemantic=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=0,l=0,h=0,k=0; f<a.length;)a[f][0]==DIFF_EQUAL?(c[d++]=f,g=h,l=k,k=h=0,e=a[f][1]):(a[f][0]==DIFF_INSERT?h+=a[f][1].length:k+=a[f][1].length,e&&e.length<=Math.max(g,l)&&e.length<=Math.max(h,k)&&(a.splice(c[d-1],0,new dmp.Diff(DIFF_DELETE,e)),a[c[d-1]+1][0]=DIFF_INSERT,d--,d--,f=0<d?c[d-1]:-1,k=h=l=g=0,e=null,b=!0)),f++;b&&this.diff_cleanupMerge(a);this.diff_cleanupSemanticLossless(a);for(f=1; f<
a.length;){if(a[f-1][0]==DIFF_DELETE&&a[f][0]==DIFF_INSERT){b=a[f-1][1];c=a[f][1];d=this.diff_commonOverlap_(b,c);e=this.diff_commonOverlap_(c,b);if(d>=e){if(d>=b.length/2||d>=c.length/2)a.splice(f,0,new dmp.Diff(DIFF_EQUAL,c.substring(0,d))),a[f-1][1]=b.substring(0,b.length-d),a[f+1][1]=c.substring(d),f++}else if(e>=b.length/2||e>=c.length/2)a.splice(f,0,new dmp.Diff(DIFF_EQUAL,b.substring(0,e))),a[f-1][0]=DIFF_INSERT,a[f-1][1]=c.substring(0,c.length-e),a[f+1][0]=DIFF_DELETE,
    a[f+1][1]=b.substring(e),f++;f++}f++}};
dmp.prototype.diff_cleanupSemanticLossless=function(a){function b(y, q){if(0===q||q===y.length)return 6;var w=y.charAt(q-1),t=y.charAt(q),r=w.match(dmp.nonAlphaNumericRegex_),m=t.match(dmp.nonAlphaNumericRegex_),p=r&&w.match(dmp.whitespaceRegex_),v=m&&t.match(dmp.whitespaceRegex_);w=p&&w.match(dmp.linebreakRegex_);t=v&&t.match(dmp.linebreakRegex_);var u=w&&y.substring(q-dmp.blanklineEndRegexMaxLength_,
    q).match(dmp.blanklineEndRegex_),z=t&&y.substring(q,q+dmp.blanklineStartRegexMaxLength_).match(dmp.blanklineStartRegex_);return u||z?5:w||t?4:r&&!p&&v?3:p||v?2:r||m?1:0}for(var c=1; c<a.length-1;){if(a[c-1][0]==DIFF_EQUAL&&a[c+1][0]==DIFF_EQUAL){var d=a[c-1][1],e=a[c][1],f=a[c+1][1],g=d+e+f,l=this.diff_commonSuffix(d,e);f=this.diff_commonPrefix(e,f);d=d.length;l=d-l;f=d+f;e=l+e.length;for(var h=l,k=e,n=b(g,l)+b(g,e); l<f;){l+=1;e+=1;var x=b(g,l)+b(g,e);x>=n&&(n=
    x,h=l,k=e)}h!=d&&(0<h?a[c-1][1]=g.substring(0,h):(a.splice(c-1,1),c--),a[c][1]=g.substring(h,k),k<g.length?a[c+1][1]=g.substring(k):(a.splice(c+1,1),c--))}c++}};dmp.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;dmp.whitespaceRegex_=/\s/;dmp.linebreakRegex_=/[\r\n]/;dmp.blanklineEndRegex_=/\n\r?\n$/;dmp.blanklineStartRegex_=/^\r?\n\r?\n/;dmp.blanklineEndRegexMaxLength_=3;dmp.blanklineStartRegexMaxLength_=4;
dmp.prototype.diff_cleanupEfficiency=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=!1,l=!1,h=!1,k=!1; f<a.length;)a[f][0]==DIFF_EQUAL?(a[f][1].length<this.Diff_EditCost&&(h||k)?(c[d++]=f,g=h,l=k,e=a[f][1]):(d=0,e=null),h=k=!1):(a[f][0]==DIFF_DELETE?k=!0:h=!0,e&&(g&&l&&h&&k||e.length<this.Diff_EditCost/2&&3==g+l+h+k)&&(a.splice(c[d-1],0,new dmp.Diff(DIFF_DELETE,e)),a[c[d-1]+1][0]=DIFF_INSERT,d--,e=null,g&&l?(h=k=!0,d=0):(d--,f=0<d?c[d-1]:-1,h=k=!1),b=!0)),f++;b&&this.diff_cleanupMerge(a)};
dmp.prototype.diff_cleanupMerge=function(a){a.push(new dmp.Diff(DIFF_EQUAL,""));for(var b=0,c=0,d=0,e="",f="",g; b<a.length;)switch(a[b][0]){case DIFF_INSERT:d++;f+=a[b][1];b++;break;case DIFF_DELETE:c++;e+=a[b][1];b++;break;case DIFF_EQUAL:1<c+d?(0!==c&&0!==d&&(g=this.diff_commonPrefix(f,e),0!==g&&(0<b-c-d&&a[b-c-d-1][0]==DIFF_EQUAL?a[b-c-d-1][1]+=f.substring(0,g):(a.splice(0,0,new dmp.Diff(DIFF_EQUAL,f.substring(0,g))),b++),f=f.substring(g),e=e.substring(g)),
    g=this.diff_commonSuffix(f,e),0!==g&&(a[b][1]=f.substring(f.length-g)+a[b][1],f=f.substring(0,f.length-g),e=e.substring(0,e.length-g))),b-=c+d,a.splice(b,c+d),e.length&&(a.splice(b,0,new dmp.Diff(DIFF_DELETE,e)),b++),f.length&&(a.splice(b,0,new dmp.Diff(DIFF_INSERT,f)),b++),b++):0!==b&&a[b-1][0]==DIFF_EQUAL?(a[b-1][1]+=a[b][1],a.splice(b,1)):b++,c=d=0,f=e=""}""===a[a.length-1][1]&&a.pop();c=!1;for(b=1; b<a.length-1;)a[b-1][0]==DIFF_EQUAL&&a[b+1][0]==DIFF_EQUAL&&(a[b][1].substring(a[b][1].length-
    a[b-1][1].length)==a[b-1][1]?(a[b][1]=a[b-1][1]+a[b][1].substring(0,a[b][1].length-a[b-1][1].length),a[b+1][1]=a[b-1][1]+a[b+1][1],a.splice(b-1,1),c=!0):a[b][1].substring(0,a[b+1][1].length)==a[b+1][1]&&(a[b-1][1]+=a[b+1][1],a[b][1]=a[b][1].substring(a[b+1][1].length)+a[b+1][1],a.splice(b+1,1),c=!0)),b++;c&&this.diff_cleanupMerge(a)};dmp.prototype.diff_text1=function(a){for(var b=[],c=0; c<a.length; c++)a[c][0]!==DIFF_INSERT&&(b[c]=a[c][1]);return b.join("")};
dmp.prototype.diff_text2=function(a){for(var b=[],c=0; c<a.length; c++)a[c][0]!==DIFF_DELETE&&(b[c]=a[c][1]);return b.join("")};
dmp.prototype.patch_addContext_=function(a, b){if(0!=b.length){if(null===a.start2)throw Error("patch not initialized");for(var c=b.substring(a.start2,a.start2+a.length1),d=0; b.indexOf(c)!=b.lastIndexOf(c)&&c.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)d+=this.Patch_Margin,c=b.substring(a.start2-d,a.start2+a.length1+d);d+=this.Patch_Margin;(c=b.substring(a.start2-d,a.start2))&&a.diffs.unshift(new dmp.Diff(DIFF_EQUAL,c));(d=b.substring(a.start2+a.length1,
    a.start2+a.length1+d))&&a.diffs.push(new dmp.Diff(DIFF_EQUAL,d));a.start1-=c.length;a.start2-=c.length;a.length1+=c.length+d.length;a.length2+=c.length+d.length}};
dmp.prototype.patch_make=function(a, b, c){if("string"==typeof a&&"string"==typeof b&&"undefined"==typeof c){var d=a;b=this.diff_main(d,b,!0);2<b.length&&(this.diff_cleanupSemantic(b),this.diff_cleanupEfficiency(b))}else if(a&&"object"==typeof a&&"undefined"==typeof b&&"undefined"==typeof c)b=a,d=this.diff_text1(b);else if("string"==typeof a&&b&&"object"==typeof b&&"undefined"==typeof c)d=a;else if("string"==typeof a&&"string"==typeof b&&c&&"object"==typeof c)d=a,b=c;else throw Error("Unknown call format to patch_make.");
    if(0===b.length)return[];c=[];a=new dmp.patch_obj;for(var e=0,f=0,g=0,l=d,h=0; h<b.length; h++){var k=b[h][0],n=b[h][1];e||k===DIFF_EQUAL||(a.start1=f,a.start2=g);switch(k){case DIFF_INSERT:a.diffs[e++]=b[h];a.length2+=n.length;d=d.substring(0,g)+n+d.substring(g);break;case DIFF_DELETE:a.length1+=n.length;a.diffs[e++]=b[h];d=d.substring(0,g)+d.substring(g+n.length);break;case DIFF_EQUAL:n.length<=2*this.Patch_Margin&&e&&b.length!=h+1?(a.diffs[e++]=b[h],a.length1+=n.length,a.length2+=n.length):
        n.length>=2*this.Patch_Margin&&e&&(this.patch_addContext_(a,l),c.push(a),a=new dmp.patch_obj,e=0,l=d,f=g)}k!==DIFF_INSERT&&(f+=n.length);k!==DIFF_DELETE&&(g+=n.length)}e&&(this.patch_addContext_(a,l),c.push(a));return c};dmp.prototype.patch_toText=function(a){for(var b=[],c=0; c<a.length; c++)b[c]=a[c];return b.join("")};dmp.patch_obj=function(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0};
dmp.patch_obj.prototype.toString=function(){for(var a=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],b,c=0; c<this.diffs.length; c++){switch(this.diffs[c][0]){case DIFF_INSERT:b="+";break;case DIFF_DELETE:b="-";break;case DIFF_EQUAL:b=" "}a[c+1]=b+encodeURI(this.diffs[c][1])+"\n"}return a.join("").replace(/%20/g," ")};